# 管线化

在请求持久连接的情况下, 某个连接上消息的传递类似于:

`请求1 -> 响应1 -> 请求2 -> 响应2 -> 请求3 -> 响应3`

- 管线化

某个请求上的消息变成了类似这样:

`请求1 -> 请求2 -> 请求3 -> 响应1 -> 响应2 -> 响应3`

- 管线化机制通过持久连接完成, 仅 `HTTP/1.1` 支持此技术

- 只有 `GET` 和 `HEAD` 请求可以进行管线化, 而 `POST` 则有所限制

- 初次创建连接时不应启动管线机制, 因为对方(服务器)不一定支持 `HTTP/1.1` 版本的协议

- 管线化不会影响响应到来的顺序, 如上面的例子所示, 响应返回的顺序并未改变

- `HTTP/1.1` 要求服务器端支持管线化, 但并不要求服务器端也对响应进行管线化处理, 只是要求对于管线化的请求不失败即可

- 由于上面提到的服务端问题, 开启管线化很可能并不会带来大幅度的性能提升, 而且很多服务器端和代理程序对管线化的支持并不好, 因此现代浏览器如 `Chrome` 和 `Firefox` 默认并未开启管线化支持